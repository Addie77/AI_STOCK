<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>AI è‚¡å¸‚åˆ†æç³»çµ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #212a33; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .card { width: 100%; max-width: 500px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        
        /* Loading é®ç½©æ¨£å¼ */
        #loading-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.9); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            display: none; /* é è¨­éš±è— */
        }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <h4 class="mt-3 text-dark">AI æ­£åœ¨å¤§æ•¸æ“šåˆ†æä¸­...</h4>
        <p class="text-muted">æ­£åœ¨è®€å–æ–°èã€è¨ˆç®—æŒ‡æ¨™ã€ç¹ªè£½åœ–è¡¨ï¼Œè«‹ç¨å€™</p>
    </div>

    <div class="card p-4">
        <h2 class="text-center mb-4">ğŸš€ AI æ™ºèƒ½é¸è‚¡åŠ©æ‰‹</h2>
        <form method="POST" id="analyze-form">
            <div class="mb-3">
                <label for="ticker" class="form-label">è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼ (ä¾‹å¦‚ 2330)</label>
                <input type="text" class="form-control form-control-lg" id="ticker" name="ticker" placeholder="2330" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 btn-lg" id="submit-btn">é–‹å§‹åˆ†æ</button>
        </form>
        {% if watchlist %}
        <div class="card mt-4 shadow-sm">
            <div class="card-header bg-secondary text-white">
                ğŸ‘€ æˆ‘çš„è‡ªé¸è‚¡ (My Watchlist)
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                    {% for stock in watchlist %}
                        <div class="btn-group" role="group">
                            <form action="/" method="POST" style="display:inline;">
                                <input type="hidden" name="ticker" value="{{ stock.ticker }}">
                                <button type="submit" class="btn btn-outline-dark fw-bold">
                                    {{ stock.ticker }}
                                </button>
                            </form>
                            
                            <a href="{{ url_for('delete_from_watchlist', id=stock.id) }}" 
                            class="btn btn-danger"
                            onclick="return confirm('ç¢ºå®šè¦ç§»é™¤ {{ stock.ticker }} å—ï¼Ÿ');">
                                &times;
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        <div class="mt-3 text-center text-muted">
            <small>æ”¯æ´å°è‚¡ä¸Šå¸‚æ«ƒå…¬å¸</small>
        </div>
    </div>

    <script>
        document.getElementById('analyze-form').addEventListener('submit', function() {
            // é¡¯ç¤º Loading é®ç½©
            document.getElementById('loading-overlay').style.display = 'flex';
            
            // é–å®šæŒ‰éˆ•ï¼Œæ”¹è®Šæ–‡å­—ï¼Œé˜²æ­¢é‡è¤‡æäº¤
            var btn = document.getElementById('submit-btn');
            btn.disabled = true;
            btn.innerHTML = 'å•Ÿå‹•ä¸­...';
        });
    </script>

</body>
</html>